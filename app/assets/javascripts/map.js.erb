function initMap() {
  directionsDisplay = new google.maps.DirectionsRenderer;
  directionsService = new google.maps.DirectionsService;
  var map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: 40.7831, lng: -73.9712},
        zoom: 11
    });
    directionsDisplay.setMap(map);
}
function calculateAndDisplayRoute(directionsService, directionsDisplay){
    directionsService.route({
      origin: {lat: origin_lat, lng: origin_lng},
      destination: {lat: dest_lat, lng: dest_lng},
      travelMode: 'BICYCLING'
    }, function(response, status) {
      if (status === 'OK') {
        directionsDisplay.setDirections(response);
      } else {
        window.alert('Directions request failed due to ' + status);
      }
    });

}

setTimeout(initMap, 10);


setTimeout(function(){
  calculateAndDisplayRoute(directionsService, directionsDisplay)}, 30);

